<section class="reviews-section">
  <div class="container">
    <div class="reviews-header" data-aos="fade-up">
      <h2 class="section-title">{{ 'reviews.headline' | translate }}</h2>
    </div>

    <div class="testimonial-carousel" data-aos="fade-up" data-aos-delay="200">
      <div class="testimonial-track" aria-live="polite"
           [class.transitioning]="isTransitioning"
           [style.transform]="getTransform()">
        @for (testimonial of testimonials; track $index) {
          <div class="testimonial-card"
               [class.active]="$index === currentIndex"
               [class.prev]="$index === (currentIndex - 1 + testimonials.length) % testimonials.length"
               [class.next]="$index === (currentIndex + 1) % testimonials.length">
            @if ($index === currentIndex) {
              <img src="/designs/images/misc/quotes.svg" alt="Quotes" class="quote-svg" loading="lazy">
            }
            <p class="testimonial-text">{{testimonial.text}}</p>
            <div class="testimonial-author">
              <div class="line"></div>
              @if (testimonial.author) {
                <span class="author-name">{{testimonial.author}} - {{testimonial.role}}</span>
              } @else {
                <span class="author-name">{{testimonial.role}}</span>
              }
            </div>
          </div>
        }
      </div>
    </div>
    
    <div class="navigation-wrapper" data-aos="fade-up" data-aos-delay="300">
      <button class="carousel-arrow carousel-arrow-left" (click)="previousSlide()">
        <img src="/designs/images/misc/arrow_back.svg" alt="Previous" loading="lazy">
      </button>

      <div class="testimonial-indicators">
        @for (testimonial of originalTestimonials; track testimonial.text; let i = $index) {
          <span class="indicator" [class.active]="i === currentIndex % originalTestimonials.length"></span>
        }
      </div>

      <button class="carousel-arrow carousel-arrow-right" (click)="nextSlide()">
        <img src="/designs/images/misc/arrow_forward.svg" alt="Next" loading="lazy">
      </button>
    </div>
  </div>
</section>
